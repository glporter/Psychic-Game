<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="UTF-8">
    <title>Guess what letter I'm thinking about?</title>
</head>

<body>

    <h1>The Psychic Game</h1>
    <br>
    <h2>Guess what letter I'm thinking of?</h2>
    <br>
    <h2>Wins:<span id="win-count"></span></h2>
    <br>
    <h2>Losses:<span id="loss-count"></span></h2>
    <br>
    <h2>Guesses Left:<span id="guess-count"></span></h2>
    <br>
    <h2>Your Guesses so far:<span id="user-text"></span></h2>

    <script>
        var maxTries = 10;
        var winTotal = 0;
        var lossTotal = 0;
        var letterPicked = '';
        var letter = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'];
        var winCount = 0;
        var lossCount = 0;
        var guess = 0;
        var text = '';
        var guessesLeft = 26;
        var userText = document.getElementById("user-text");
        var winCount = document.getElementById("win-count");
        var lossCount = document.getElementById("loss-count");
        var guessCount = document.getElementById("guess-count");

        document.onkeypress = function(event) {
                userText.textContent = "KEY PRESSED";

                text = event.key + text;
                // document.writeln("text = " + text);

                userText.textContent = text;
                // console.log('VALUE OF TEXT', text[0]);

                letterPicked = letter[rand()];
                //console.log('VALUE OF TEXT', text[0]);
                //console.log('VALUE OF letterPicked', letterPicked);

                if (text[0] === letterPicked) {
                    winTotal++;
                    winCount.textContent = winTotal;
                } else {
                    lossTotal++;
                    lossCount.textContent = lossTotal;
                }

                // incrementGuess();

            } //end function (event)


        document.onkeyup = function(event) {

                if (guess > 25) {
                    gameOver();
                    /*
                    guess = 0;
                    userText = '';
                    userText.textContent = '';
                    winCount = 0;
                    winCount.textContent = 0;
                    lossCount = 0;
                    lossCount.textContent = 0;
                    guessCount = 0;
                    guessCount.textContent = 0;
                    */
                }
                guess++;
                guessesLeft--;
                guessCount.textContent = guessesLeft;

            } //end function(event)


        function gameOver() {
            //alert("Branched to the resetGame function...")
            console.log("winCount = " + winCount.textContent);
            if (winCount.textContent < 1) {
                alert("Sorry! You didn't guess any letters at all. Refresh the browser to play the game again.");
            } else {
                alert("Congratulations! You got " + winCount.textContent + " right. Refresh the browser to play the game again.");
            }

            /*
            maxTries = 10;
            winTotal = 0;
            lossTotal = 0;
            letterPicked = '';
            winCount = 0;
            lossCount = 0;
            guess = 0;
            text = '';
            guessesLeft = 25;
            document.getElementById("user-text").innerHTML = "";
            document.getElementById("win-count").innerHTML = "";
            document.getElementById("loss-count").innerHTML = "";
            document.getElementById("guess-count").innerHTML = "";
            lossTotal = 0;
            guessCount = 0;
            guessesLeft = 25;
            */
        }

        function rand() {
            return (Math.floor((Math.random() * 26) + 1));
        }
    </script>

</body>

</html>